<?xml version="1.0" encoding="utf-8" ?> 
<Patch>
  <!-- Create wrought iron -->
  <Operation Class="PatchOperationFindMod">
    <mods>
      <li>Simple Chains: Steel</li>
    </mods>
    <match Class="PatchOperationSequence">
      <operations>
        <li Class="PatchOperationAdd">
          <xpath>/Defs</xpath>
          <value>
            <RecipeDef>
              <defName>RefineIron</defName>
              <label>refine iron ore</label>
              <description>Make a batch of wrought iron from raw iron ore.</description>
              <jobString>Refining iron ore.</jobString>
              <effectWorking>Smelt</effectWorking>
              <soundWorking>Recipe_Smelt</soundWorking>
              <workAmount>800</workAmount>
              <workSpeedStat>SmeltingSpeed</workSpeedStat>
              <workSkillLearnFactor>0.25</workSkillLearnFactor>
              <targetCountAdjustment>15</targetCountAdjustment>
              <allowMixingIngredients>false</allowMixingIngredients>
              <ingredients>
                <li>
                  <filter>
                    <thingDefs />
                  </filter>
                  <count>5</count>
                </li>
                <li>
                  <filter>
                    <thingDefs>
                      <li>Owl_Iron</li>
                    </thingDefs>
                  </filter>
                  <count>15</count>
                </li>
              </ingredients>
              <fixedIngredientFilter>
                <thingDefs>
                  <li>Owl_Iron</li>
                </thingDefs>
              </fixedIngredientFilter>
              <products>
                <WroughtIron>15</WroughtIron>
              </products>
              <recipeUsers>
                <li>Owl_Bloomery</li>
                <li>ElectricSmelter</li>
              </recipeUsers>
            </RecipeDef>
          </value>
        </li>
        <li Class="PatchOperationFindMod">
          <mods>
            <li>[WD] Simple Coal</li>
          </mods>
          <match Class="PatchOperationSequence">
            <operations>
              <li Class="PatchOperationAdd">
                <xpath>
                  /Defs/RecipeDef[defName='RefineIron']/ingredients/li[1]/filter/thingDefs |
                  /Defs/RecipeDef[defName='RefineIron']/fixedIngredientFilter/thingDefs
                </xpath>
                <value>
                  <li>WDCoal</li>
                </value>
              </li>
            </operations>
          </match>
        </li>
        <!-- Bloomery can't make steel -->
        <li Class="PatchOperationRemove">
          <xpath>/Defs/RecipeDef[defName='Owl_RefineSteel']/recipeUsers/li[text()='Owl_Bloomery']</xpath>
        </li>
        <!-- Can't make stuff out of iron ore -->
        <li Class="PatchOperationRemove">
          <xpath>/Defs/ThingDef[defName='Owl_Iron']/stuffProps</xpath>
        </li>
      </operations>
    </match>
  </Operation>

  <!-- Random Seeds -->
  <Operation Class="PatchOperationFindMod">
    <mods>
      <li>SeedsPlease</li>
    </mods>
    <match Class="PatchOperationAdd">
      <xpath>/Defs</xpath>
      <value>
        <RecipeDef>
          <defName>FindSeedsInPlantMatter</defName>
          <label>find seeds</label>
          <description>Find new plant seeds by sifting through spare plant matter. The plants must be researched. Skilled growers can find seeds faster.</description>
          <jobString>Finding seeds</jobString>
          <workSpeedStat>PlantWorkSpeed</workSpeedStat>
          <effectWorking>Harvest</effectWorking>
          <workSkill>Plants</workSkill>
          <workAmount>600</workAmount>
          <recipeUsers>
            <li>PlantProcessingTable</li>
            <li>CraftingSpot</li>
          </recipeUsers>
          <ingredients>
            <li>
              <filter>
                <thingDefs>
                  <li>PlantScraps</li>
                  <li>RottedMush</li>
                </thingDefs>
              </filter>
              <count>50</count>
            </li>
          </ingredients>
          <fixedIngredientFilter>
            <thingDefs>
              <li>PlantScraps</li>
              <li>RottedMush</li>
            </thingDefs>
          </fixedIngredientFilter>
          <products>
            <RandomSeed>3</RandomSeed>
          </products>
          <skillRequirements>
            <Plants>4</Plants>
          </skillRequirements>
        </RecipeDef>
        <RecipeDef>
          <defName>FindSeedsInPlantMatterBulk</defName>
          <label>find many seeds</label>
          <description>Find a lot of new plant seeds by sifting through spare plant matter. The plants must be researched. Skilled growers can find seeds faster.</description>
          <jobString>Finding many seeds</jobString>
          <workSpeedStat>PlantWorkSpeed</workSpeedStat>
          <effectWorking>Harvest</effectWorking>
          <workSkill>Plants</workSkill>
          <workAmount>2400</workAmount>
          <recipeUsers>
            <li>PlantProcessingTable</li>
            <li>CraftingSpot</li>
          </recipeUsers>
          <ingredients>
            <li>
              <filter>
                <thingDefs>
                  <li>PlantScraps</li>
                  <li>RottedMush</li>
                </thingDefs>
              </filter>
              <count>200</count>
            </li>
          </ingredients>
          <fixedIngredientFilter>
            <thingDefs>
              <li>PlantScraps</li>
              <li>RottedMush</li>
            </thingDefs>
          </fixedIngredientFilter>
          <products>
            <RandomSeed>12</RandomSeed>
          </products>
          <skillRequirements>
            <Plants>6</Plants>
          </skillRequirements>
        </RecipeDef>
      </value>
    </match>
  </Operation>
</Patch>